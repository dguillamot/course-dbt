
version: 2

models:
  
  - name: mart_product__dim_users
    description: "Users dimension (product mart model)"
    columns:
      - name: user_guid
        description: "The primary key for this table (PK)"
        tests:
          - not_null
      - name: first_name
        description: "The user's first name"
        tests:
          - not_null
      - name: last_name
        description: "The user's last name"
      - name: email
        description: "The user's email"        
      - name: phone_number
        description: "The user's phone number"        
      - name: user_created_at
        description: "Datetime this user signed up"        
        tests:
          - not_null
      - name: user_updated_at
        description: "Datetime this user record most recently was updated"        
      - name: user_address_guid
        description: "The address attached to this user (FK)"                     
      - name: first_page_view_event_guid
        description: "Event guid for the first page_view event for this user (FK)"                           
      - name: first_page_view_session_guid
        description: "Session guid for the first page_view event for this user (FK)"                           
      - name: first_page_view_page_url
        description: "Page url for the first page_view event for this user"                           
      - name: first_page_view_created_at
        description: "Datetime of creation for the first page_view event for this user"                                                   
      - name: first_order_order_guid
        description: "Order guid for the first order for this user (FK)"                                                           
      - name: first_order_promo_guid
        description: "Promo guid for the first order for this user (FK)"                                                           
      - name: first_order_address_guid
        description: "Address guid for the first order for this user (FK)"                                                           
      - name: first_order_created_at
        description: "Datetime of creation for the first order for this user"                                                           
      - name: first_order_order_cost
        description: "Order costfor the first order for this user"                                                           
      - name: first_order_shipping_cost
        description: "Shipping cost for the first order for this user"                                                           
      - name: first_order_order_total
        description: "Order total for the first order for this user"                                                           
      - name: first_order_tracking_guid
        description: "Tracking guidfor the first order for this user (FK)"                                                           
      - name: first_order_shipping_service
        description: "Shipping service for the first order for this user"                                                           
      - name: first_order_estimated_delivery_at
        description: "Datetime for the estimated delivery of the first order for this user"                                                           
      - name: first_order_delivered_at
        description: "Datetime delivered_at for the first order for this user"                                                           
      - name: first_order_status
        description: "Status for the first order for this user"                                                                                                                                                                   
    config:
      column_types:
        user_guid: varchar(256)
        first_name: varchar(256)
        last_name: varchar(256)
        email: varchar(256)
        phone_number: varchar(256)
        user_created_at: timestamp
        user_updated_at: timestamp
        user_address_guid: varchar(256)
        first_page_view_event_guid: varchar(256)
        first_page_view_session_guid: varchar(256)
        first_page_view_page_url: varchar(256)
        first_page_view_created_at: timestamp
        first_order_order_guid: varchar(256)
        first_order_promo_guid: varchar(256)
        first_order_address_guid: varchar(256)
        first_order_created_at: timestamp
        first_order_order_cost: float
        first_order_shipping_cost: float
        first_order_order_total: float
        first_order_tracking_guid: varchar(256)
        first_order_shipping_service: varchar(256)
        first_order_estimated_delivery_at: timestamp
        first_order_delivered_at: timestamp
        first_order_status: varchar(256)  
    tests:
      - dbt_expectations.expect_column_pair_values_A_to_be_greater_than_B:
          column_A: user_updated_at
          column_B: user_created_at
          or_equal: True



  - name: mart_product__dim_orders
    description: "Orders dimension (product mart model)"
    columns:
      - name: order_guid
        description: "The primary key for this table (PK)"
        tests:
          - unique
          - not_null
      - name: user_guid
        description: "The user attached to this order (FK)"
        tests:
          - not_null
      - name: promo_guid
        description: "The promotion attached to this order, if available (FK)"
      - name: address_guid
        description: "The address attached to this order (FK)"        
      - name: created_at
        description: "Datetime this order was created"
      - name: order_cost
        description: "Cost of this order (without shipping)"        
        tests:
          - positive_values
      - name: shipping_cost
        description: "Shipping cost for this order"        
        tests:
          - positive_values        
      - name: order_total
        description: "Total cost of this order (includes shipping_cost)"                     
        tests: 
          - positive_values
      - name: tracking_guid
        description: "Tracking information attached to this order (FK)"                           
      - name: shipping_service
        description: "Shipping service used for this order"                           
      - name: estimated_delivery_at
        description: "Datetime that this order is expected to be delivered at"                           
      - name: delivered_at
        description: "Datetime that this order was delivered"                                                   
      - name: status
        description: "Status of this order"                                                           
      - name: order_sequence_for_user
        description: "What number order this was for this user. 1 means first order, 2 means second order, etc"                                                           
    config:
      column_types:
        order_guid: varchar(256)
        user_guid: varchar(256)
        promo_guid: varchar(256)
        address_guid: varchar(256)
        created_at: timestamp
        order_cost: float
        shipping_cost: float
        order_total: float
        tracking_guid: varchar(256)
        shipping_service: varchar(256)
        estimated_delivery_at: timestamp
        delivered_at: timestamp
        status: varchar(256)
        order_sequence_for_user: varchar(256)



  - name: fct_page_views
    description: "Page View (page_view) Events (Analytics) (product mart model)"
    columns:
      - name: event_guid
        description: "The primary key for this table (PK)"
        tests:
          - unique
          - not_null
      - name: session_guid
        description: "Session this event belongs to (FK)"
        tests:
          - not_null
      - name: user_guid
        description: "User who triggered event (FK)"
      - name: page_url
        description: "URL of page this event occured on"
      - name: created_at
        description: "Datetime this event was triggered"
        tests:
          - not_null         
      - name: product_guid
        description: "Product guid attached to this event (FK)"
      - name: product_name
        description: "Product name attached to this event"
      - name: price
        description: "Product price attached to this event"
      - name: inventory
        description: "Product inventory attached to this event"
      - name: user_created_at
        description: "Datetime the user attached to this event signed up at"          
    config:
      column_types:
        event_guid: varchar(256)
        sesson_guid: varchar(256)
        user_guid: varchar(256)
        page_url: varchar(256)
        created_at: timestamp
        product_guid: varchar(256)
        product_name: varchar(256)
        price: float
        inventory: float
        user_created_at: timestamp       
        

  - name: fct_cart_additions
    description: "Cart Additions (add_to_cart) Events (Analytics) (product mart model)"
    columns:
      - name: event_guid
        description: "The primary key for this table (PK)"
        tests:
          - unique
          - not_null
      - name: session_guid
        description: "Session this event belongs to (FK)"
        tests:
          - not_null
      - name: user_guid
        description: "User who triggered event (FK)"
      - name: page_url
        description: "URL of page this event occured on"
      - name: created_at
        description: "Datetime this event was triggered"
        tests:
          - not_null         
      - name: product_guid
        description: "Product guid attached to this event (FK)"
      - name: product_name
        description: "Product name attached to this event"
      - name: price
        description: "Product price attached to this event"
      - name: inventory
        description: "Product inventory attached to this event"
      - name: user_created_at
        description: "Datetime the user attached to this event signed up at"          
    config:
      column_types:
        event_guid: varchar(256)
        sesson_guid: varchar(256)
        user_guid: varchar(256)
        page_url: varchar(256)
        created_at: timestamp
        product_guid: varchar(256)
        product_name: varchar(256)
        price: float
        inventory: float
        user_created_at: timestamp     
        

  - name: fct_checkouts
    description: "Checkouts (checkout) Events (Analytics) (product mart model)"
    columns:
      - name: event_guid
        description: "The primary key for this table (PK)"
        tests:
          - unique
          - not_null
      - name: session_guid
        description: "Session this event belongs to (FK)"
        tests:
          - not_null
      - name: user_guid
        description: "User who triggered event (FK)"
      - name: page_url
        description: "URL of page this event occured on"
      - name: created_at
        description: "Datetime this event was triggered"
        tests:
          - not_null        
      - name: order_guid
        description: "The Order attached to this event (FK)"
        tests:
          - not_null             
      - name: product_guid
        description: "Product guid attached to this event (FK)"
      - name: product_name
        description: "Product name attached to this event"
      - name: price
        description: "Product price attached to this event"
      - name: order_item_guid
        description: "The Order Item attached to this event (FK)"
        tests:
          - not_null       
      - name: order_item_quantity
        description: "The quantity attached to this event"
        tests:
          - positive_values                         
      - name: inventory
        description: "Product inventory attached to this event"
      - name: promo_guid
        description: "Product inventory attached to this event"
      - name: address_guid
        description: "Product inventory attached to this event"
      - name: order_created_at
        description: "Product inventory attached to this event"
      - name: order_cost
        description: "Cost of this order (without shipping)"        
        tests:
          - positive_values
      - name: shipping_cost
        description: "Shipping cost for this order"        
        tests:
          - positive_values        
      - name: order_total
        description: "Total cost of this order (includes shipping_cost)"                     
        tests: 
          - positive_values
      - name: tracking_guid
        description: "Tracking information attached to this order (FK)"                           
      - name: shipping_service
        description: "Shipping service used for this order"                           
      - name: estimated_delivery_at
        description: "Datetime that this order is expected to be delivered at"                           
      - name: delivered_at
        description: "Datetime that this order was delivered"                                                   
      - name: order_status
        description: "Status of this order"
      - name: promo_discount
        description: "Discount associated with the promotion for this order"  
      - name: promo_status
        description: "Status of promotion associated with this order"  
      - name: order_address_state
        description: "State of the address associated with this order"  
      - name: order_address_zip_code
        description: "Zip code of the address associated with this order"  
      - name: order_address_country
        description: "Country of the address associated with this order"                                                                                                                                                                                           
      - name: user_created_at
        description: "Datetime the user attached to this order"          
    config:
      column_types:
        event_guid: varchar(256)
        session_guid: varchar(256)
        user_guid: varchar(256)
        page_url: varchar(256)
        created_at: timestamp
        order_guid: varchar(256)
        product_guid: varchar(256)
        product_name: varchar(256)
        price: varchar(256)
        order_item_guid: varchar(256)
        order_item_quantity: integer
        inventory: float
        promo_guid: varchar(256)
        address_guid: varchar(256)
        order_created_at: timestamp
        order_cost: float
        shipping_cost: float
        order_total: float
        tracking_guid: varchar(256)
        shipping_service: varchar(256)
        estimated_delivery_at: timestamp
        delivered_at: timestamp
        order_status: varchar(256)
        promo_discount: varchar(256)
        promo_status: varchar(256)
        order_address_state: varchar(256)
        order_address_zip_code: varchar(256)
        order_address_country: varchar(256)
        user_created_at: timestamp
        

  - name: fct_package_shippings
    description: "Shippings (package_shipped) Events (Analytics) (product mart model)"
    columns:
      - name: event_guid
        description: "The primary key for this table (PK)"
        tests:
          - unique
          - not_null
      - name: session_guid
        description: "Session this event belongs to (FK)"
        tests:
          - not_null
      - name: user_guid
        description: "User who triggered event (FK)"
      - name: page_url
        description: "URL of page this event occured on"
      - name: created_at
        description: "Datetime this event was triggered"
        tests:
          - not_null        
      - name: order_guid
        description: "The Order attached to this event (FK)"
        tests:
          - not_null             
      - name: product_guid
        description: "Product guid attached to this event (FK)"
      - name: product_name
        description: "Product name attached to this event"
      - name: price
        description: "Product price attached to this event"
      - name: order_item_guid
        description: "The Order Item attached to this event (FK)"
        tests:
          - not_null       
      - name: order_item_quantity
        description: "The quantity attached to this event"
        tests:
          - positive_values                         
      - name: inventory
        description: "Product inventory attached to this event"
      - name: promo_guid
        description: "Product inventory attached to this event"
      - name: address_guid
        description: "Product inventory attached to this event"
      - name: order_created_at
        description: "Product inventory attached to this event"
      - name: order_cost
        description: "Cost of this order (without shipping)"        
        tests:
          - positive_values
      - name: shipping_cost
        description: "Shipping cost for this order"        
        tests:
          - positive_values        
      - name: order_total
        description: "Total cost of this order (includes shipping_cost)"                     
        tests: 
          - positive_values
      - name: tracking_guid
        description: "Tracking information attached to this order (FK)"                           
      - name: shipping_service
        description: "Shipping service used for this order"                           
      - name: estimated_delivery_at
        description: "Datetime that this order is expected to be delivered at"                           
      - name: delivered_at
        description: "Datetime that this order was delivered"                                                   
      - name: order_status
        description: "Status of this order"
      - name: promo_discount
        description: "Discount associated with the promotion for this order"  
      - name: promo_status
        description: "Status of promotion associated with this order"  
      - name: order_address_state
        description: "State of the address associated with this order"  
      - name: order_address_zip_code
        description: "Zip code of the address associated with this order"  
      - name: order_address_country
        description: "Country of the address associated with this order"                                                                                                                                                                                           
      - name: user_created_at
        description: "Datetime the user attached to this order"          
    config:
      column_types:
        event_guid: varchar(256)
        session_guid: varchar(256)
        user_guid: varchar(256)
        page_url: varchar(256)
        created_at: timestamp
        order_guid: varchar(256)
        product_guid: varchar(256)
        product_name: varchar(256)
        price: varchar(256)
        order_item_guid: varchar(256)
        order_item_quantity: integer
        inventory: float
        promo_guid: varchar(256)
        address_guid: varchar(256)
        order_created_at: timestamp
        order_cost: float
        shipping_cost: float
        order_total: float
        tracking_guid: varchar(256)
        shipping_service: varchar(256)
        estimated_delivery_at: timestamp
        delivered_at: timestamp
        order_status: varchar(256)
        promo_discount: varchar(256)
        promo_status: varchar(256)
        order_address_state: varchar(256)
        order_address_zip_code: varchar(256)
        order_address_country: varchar(256)
        user_created_at: timestamp        

